version: '3.8'

services:
  scraper:
    build: .
    container_name: kawal-pemilu-scraper
    stdin_open: true  # Keep STDIN open for interactive CLI
    tty: true         # Allocate a pseudo-TTY for interactive mode
    volumes:
      # Mount output directories to persist downloaded images
      - ./output:/app/output
      - ./output_roi:/app/output_roi
      # Mount context for location data (read-only)
      - ./context:/app/context:ro
    environment:
      - PYTHONUNBUFFERED=1
      - TERM=xterm-256color  # Better terminal support for questionary
    # IMPORTANT: Run with: docker-compose run --rm scraper
    # Do NOT use: docker-compose up (doesn't allocate proper TTY)
    command: python cli.py
